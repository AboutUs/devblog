<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
  <title>Dev @ AboutUs.org </title>
  <link href="http://dev.aboutus.org/"/>
  <link type="application/atom+xml" rel="self" href="http://dev.aboutus.org/atom.xml"/>
  <updated>2011-04-13T12:04:59-07:00</updated>
  <id>http://dev.aboutus.org/</id>
  <author>
    <name>AboutUs</name>
    <email>info@aboutus.org</email>
  </author>

  
  <entry>
    <id>http://dev.aboutus.org/2011/04/08/initial-commit</id>
    <link type="text/html" rel="alternate" href="http://dev.aboutus.org/2011/04/08/initial-commit.html"/>
    <title>Initial Commit</title>
    <updated>2011-04-08T00:00:00-07:00</updated>
    <author>
      <name>sam</name>
      <uri>http://dev.aboutus.org/</uri>
    </author>
    <content type="html">&lt;p&gt;This is the first post for AboutUs&amp;#8217; programming blog. The blog&amp;#8217;s powered by git, jekyll and nginx. To create a post we create a text file in the git repository in our favorite editor (i.e. vim). The posts go in a &lt;code&gt;_posts&lt;/code&gt; directory and look like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;devblog [master*] $ ls _posts

_posts:
2011-04-08-initial-commit.markdown&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href='http://tom.preston-werner.com/2008/11/17/blogging-like-a-hacker.html'&gt;Jekyll&lt;/a&gt; is used to convert the content textile, markdown, and html templates into a static html site.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;devblog [master*] $ jekyll
Configuration from /www/aboutus/devblog/_config.yml
Building site: . -&amp;gt; ./_site
Successfully generated site: . -&amp;gt; ./_site&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Jekyll&amp;#8217;s &lt;code&gt;--auto&lt;/code&gt; option is pretty nice for development. It regenerates the site every time you save a file.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;devblog [master*] $ jekyll --auto
Configuration from /www/aboutus/devblog/_config.yml
Auto-regenerating enabled: . -&amp;gt; ./_site
[2011-04-11 20:49:52] regeneration: 8 files changed
[2011-04-11 20:50:22] regeneration: 1 files changed
[2011-04-11 20:50:27] regeneration: 1 files changed&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;On the server jekyll generates static html files for nginx to serve.&lt;/p&gt;

&lt;p&gt;It barely has &lt;em&gt;any&lt;/em&gt; dependencies.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;devblog # gem install jekyll --no-rdoc --no-ri
Building native extensions.  This could take a while...
Successfully installed liquid-2.2.2
Successfully installed fast-stemmer-1.0.0
Successfully installed classifier-1.3.3
Successfully installed directory_watcher-1.4.0
Successfully installed syntax-1.0.0
Successfully installed maruku-0.6.0
Successfully installed jekyll-0.10.0
7 gems installed&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;There&amp;#8217;s a git post-receive hook that regenerates the site whenever someone pushes a change.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;devblog # vi .git/hooks/post-receive
#!/bin/sh
#
GIT_REPO=/www/aboutus/devblog.git
TMP_GIT_CLONE=/tmp/devblog
PUBLIC_WWW=/www/aboutus/devblog

git clone $GIT_REPO $TMP_GIT_CLONE
jekyll --no-auto $TMP_GIT_CLONE $PUBLIC_WWW
rm -Rf $TMP_GIT_CLONE
exit&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Nginx serves the static files in &lt;code&gt;/www/aboutus/devblog&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Deploying is just a &lt;code&gt;git push&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;devblog [master] $ git push 
Counting objects: 23, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (9/9), done.
Writing objects: 100% (12/12), 925 bytes, done.
Total 12 (delta 6), reused 0 (delta 0)
remote: Initialized empty Git repository in /tmp/devblog/.git/
remote: Configuration from /tmp/devblog/_config.yml
remote: Building site: /tmp/devblog -&amp;gt; /www/aboutus/devblog
remote: Successfully generated site: /tmp/devblog -&amp;gt; /www/aboutus/devblog
Killed by signal 1.
To blog@devblog:/www/aboutus/devblog.git
   12aa781..ab54f06  master -&amp;gt; master&lt;/code&gt;&lt;/pre&gt;</content>
  </entry>
  
 
</feed>

